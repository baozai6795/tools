"use strict";(self["webpackChunkvue_ego"]=self["webpackChunkvue_ego"]||[]).push([[809],{4430:function(t,e,a){a.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"text-align":"center"}},[e("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next,jumper",total:t.total,"current-page":t.currentPage,pageSize:t.pageSize},on:{"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"current-change":t.changePage}})],1)},l=[],s={props:{total:{type:Number,default:100},pageSize:{type:Number,default:10},currentPage:{type:Number,default:1}},methods:{changePage(t){this.$emit("changePage",t)}}},r=s,o=a(1001),n=(0,o.Z)(r,i,l,!1,null,"4110fa37",null),c=n.exports},8190:function(t,e,a){a.d(e,{Z:function(){return c}});var i=function(){var t=this,e=t._self._c;return e("div",[e("el-tree",{attrs:{props:t.props,load:t.loadNode,lazy:"",accordion:""},on:{"node-click":t.nodeClick}})],1)},l=[],s={data(){return{props:{label:"name",children:"zones",isLeaf:"leaf"}}},methods:{nodeClick(t,e){console.log(t),console.log(e),this.$emit("sendTreeData",t)},loadNode(t,e){0===t.level&&this.$api.getSelectCategory().then((t=>(console.log(t.data),e(t.data.result)))),t.level>=1&&this.$api.getSelectCategory({id:t.data.cid}).then((t=>(console.log(t.data),200===t.data.status?e(t.data.result):e([]))))}}},r=s,o=a(1001),n=(0,o.Z)(r,i,l,!1,null,"67437fac",null),c=n.exports},7809:function(t,e,a){a.r(e),a.d(e,{default:function(){return f}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"params"},[e("div",{staticClass:"nav"},[e("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),e("el-breadcrumb-item",{attrs:{to:{path:"/layout/params"}}},[t._v("规格参数")]),e("el-breadcrumb-item",[t._v("规格包装")])],1)],1),e("div",{staticClass:"header"},[e("el-input",{on:{change:t.searchInput},model:{value:t.inp,callback:function(e){t.inp=e},expression:"inp"}}),e("el-button",{attrs:{type:"primary"}},[t._v("查询")]),e("el-button",{attrs:{type:"primary"}},[t._v("查看")]),e("el-button",{attrs:{type:"primary"},on:{click:t.showParams}},[t._v("添加")])],1),e("el-table",{staticClass:"mytable",attrs:{data:t.tableData,border:""}},[e("el-table-column",{attrs:{prop:"itemCatId",label:"规格参数ID",width:"120"}}),e("el-table-column",{attrs:{prop:"id",label:"类目ID",width:"120"}}),e("el-table-column",{attrs:{prop:"specsName",label:"规格名称",width:"120"}}),e("el-table-column",{attrs:{prop:"paramData",label:"规格参数","show-overflow-tooltip":""}}),e("el-table-column",{attrs:{label:"操作",width:"280"}},[[e("el-button",{attrs:{size:"mini",icon:"el-icon-search"}},[t._v("查看")]),e("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"}},[t._v("编辑")]),e("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"}},[t._v("删除")])]],2)],1),e("Mypagination",{attrs:{total:t.total,pageSize:t.pageSize,currentPage:t.currentPage},on:{changePage:t.changePage}}),e("ParamsDialog",{ref:"dialog"})],1)},l=[],s=a(4430),r=function(){var t=this,e=t._self._c;return e("div",[e("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("TreeGoods",{on:{sendTreeData:t.sendTreeData}}),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary",disabled:t.isDisabled},on:{click:function(e){t.innerVisible=!0}}},[t._v(" 确定并添加分组")])],1),e("el-dialog",{attrs:{width:"45%",title:"商品规格参数配置",visible:t.innerVisible,"append-to-body":""},on:{"update:visible":function(e){t.innerVisible=e}}},[e("div",{staticClass:"title"},[t._v("当前选中的商品:"+t._s(t.treeData.name))]),e("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:t.addDomain}},[t._v("新增规格列表")]),e("hr"),e("el-form",{ref:"dynamicValidateForm",staticClass:"demo-dynamic",attrs:{model:t.dynamicValidateForm,"label-width":"120px"}},t._l(t.dynamicValidateForm.groups,(function(a,i){return e("el-form-item",{key:i,attrs:{label:a.title,prop:a.title,rules:{required:!0,message:"域名不能为空",trigger:"blur"}}},[e("div",{staticClass:"item"},[e("el-input",{model:{value:a.title,callback:function(e){t.$set(a,"title",e)},expression:"item.title"}}),e("el-button",{on:{click:function(e){return e.preventDefault(),t.addChildDomain(i)}}},[t._v("增加子组")]),e("el-button",{on:{click:function(e){return e.preventDefault(),t.removeDomain(i)}}},[t._v("删除")])],1),t._l(a.chiledern,(function(a,l){return e("el-form-item",{key:l,attrs:{label:a.title,prop:a.title,rules:{required:!0,message:"域名不能为空",trigger:"blur"}}},[e("div",{staticClass:"item"},[e("el-input",{model:{value:a.title,callback:function(e){t.$set(a,"title",e)},expression:"ele.title"}}),e("el-button",{on:{click:function(e){return e.preventDefault(),t.removeChildDomain(i,l)}}},[t._v("删除")])],1)])}))],2)})),1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("dynamicValidateForm")}}},[t._v("确定")]),e("el-button",{on:{click:t.cancel}},[t._v("取消")])],1)],1)],1)],1)},o=[],n=(a(7658),a(8190)),c={data(){return{dialogVisible:!1,innerVisible:!1,isDisabled:!0,treeData:{},dynamicValidateForm:{groups:[]}}},components:{TreeGoods:n.Z},methods:{removeChildDomain(t,e){this.dynamicValidateForm.groups[t].chiledern.splice(e,1)},addChildDomain(t){this.dynamicValidateForm.groups[t].chiledern.push({value:"",title:""})},sendTreeData(t){console.log(t),this.treeData=t,this.isDisabled=!1},submitForm(t){this.$refs[t].validate((t=>{if(!t)return console.log("error submit!!"),!1;console.log(this.dynamicValidateForm.groups),this.$api.insertItemParam({itemCatId:this.treeData.cid,content:JSON.stringify(this.dynamicValidateForm.groups),specsName:this.treeData.name}).then((t=>{console.log(t.data),200===t.data.status?(this.$message({message:"添加成功",type:"success"}),this.dialogVisible=!1,this.innerVisible=!1,this.$parent.http(1),this.dynamicValidateForm.groups=[],this.isDisabled=!0):this.$message({message:"添加失败",type:"error"})})).catch((t=>{console.log(t)}))}))},resetForm(t){this.$refs[t].resetFields()},removeDomain(t){-1!==t&&this.dynamicValidateForm.groups.splice(t,1)},addDomain(){this.dynamicValidateForm.groups.push({title:"",value:"",chiledern:[]})},cancel(){this.dialogVisible=!1,this.innerVisible=!1,this.dynamicValidateForm.groups=[],this.isDisabled=!0}}},d=c,u=a(1001),p=(0,u.Z)(d,r,o,!1,null,"3c3564a5",null),m=p.exports,h={data(){return{inp:"",tableData:[],total:1,pageSize:1,currentPage:1,list:[],type:1}},methods:{showParams(){this.$refs.dialog.dialogVisible=!0},searchInput(t){t?(console.log(t),this.$api.searchParams({search:t}).then((t=>{console.log(t.data),200===t.data.status?(this.currentPage=1,this.list=t.data.result,this.total=t.data.result.length,this.pageSize=3,this.tableData=t.data.result.slice(0,3),this.type=2):(this.tableData=[],this.total=1,this.pageSize=1,this.type=1)}))):this.http(1)},http(t){this.$api.getParams({page:t}).then((t=>{console.log(t.data),200===t.data.status&&(this.tableData=t.data.result,this.total=t.data.total,this.pageSize=t.data.pageSize)}))},changePage(t){this.currentPage=t,this.http(t),1===this.type?this.http(t):this.tableData=this.list.slice(3*(num-1),3*num)}},mounted(){this.http(1)},components:{Mypagination:s.Z,ParamsDialog:m}},g=h,b=(0,u.Z)(g,i,l,!1,null,"51d7b7d1",null),f=b.exports}}]);
//# sourceMappingURL=809.a00c5751.js.map